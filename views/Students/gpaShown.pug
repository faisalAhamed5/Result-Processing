doctype html
html(lang='en')
  include ../common/teacherHead.pug
  +head()
  body
    canvas#particles-js
    header
      h1 Gono University
        p Result Hub 
      include ../common/teacherNavbar.pug
      +navbar()

    #results

      if subjects
        h2 Review Results
        table#tbl
          tr
            th Subject Name
            th Grade Point*Credit | Grade
          each i in subjects
            tr
              th #{i.sub_name}
              each j in i.results_dbs
                if (j.dataValues.obtainedMarks*100/i.total_marks)>=79.5
                  th #{4*i.credit} | A+
                else 
                  if (j.dataValues.obtainedMarks*100/i.total_marks)>=74.5
                    th #{3.75*i.credit} | A
                  else
                    if (j.dataValues.obtainedMarks*100/i.total_marks)>=69.5
                      th #{3.50*i.credit} | A-
                    else
                      if (j.dataValues.obtainedMarks*100/i.total_marks)>=64.5
                        th #{3.25*i.credit} | B+
                      else
                        if (j.dataValues.obtainedMarks*100/i.total_marks)>=59.5
                          th #{3*i.credit} | B
                        else
                          if (j.dataValues.obtainedMarks*100/i.total_marks)>=54.5
                            th #{2.75*i.credit} | B-
                          else
                            if (j.dataValues.obtainedMarks*100/i.total_marks)>=49.5
                              th #{2.25*i.credit} | C
                            else
                              if (j.dataValues.obtainedMarks*100/i.total_marks)>=44.5
                                th #{2.25*i.credit} | C-
                              else
                                if (j.dataValues.obtainedMarks*100/i.total_marks)>=39.5
                                  th #{2*i.credit} | D
                                else
                                  th #{0*i.credit} | F



        br
        table#tbl2
          tr
            th Subject Name
            th Credit
          each i in subjects
            tr
              th= i.sub_name
              th=i.credit
        br

        span#sumg     
        br
        span#sumc
        br
        span#gpa





















  script(src="https://code.jquery.com/jquery-3.5.1.min.js")
  script.
    window.onload=function(){
      var table=document.getElementById("tbl"),sum=0,table2=document.getElementById("tbl2");
      for(var i=1;i<table.rows.length;i++){
        sum= sum+parseFloat(table.rows[i].cells[1].innerHTML);
      }
      document.getElementById("sumg").innerHTML="Total Grade Point*Credit = "+sum;

      var table=document.getElementById("tbl2"),sum2=0,table2=document.getElementById("tbl2");
      for(var i=1;i<table.rows.length;i++){
        sum2= sum2+parseFloat(table.rows[i].cells[1].innerHTML);
      }
      document.getElementById("sumc").innerHTML="Total Credit = "+sum2;
      document.getElementById("gpa").innerHTML="GPA = "+sum/sum2;


    }
    script(src='/js/particle.js') 



